(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},18566,(e,t,r)=>{t.exports=e.r(76562)},15288,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let i=r.forwardRef(({className:e,...r},i)=>(0,t.jsx)("div",{ref:i,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let s=r.forwardRef(({className:e,...r},i)=>(0,t.jsx)("div",{ref:i,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));s.displayName="CardHeader";let n=r.forwardRef(({className:e,...r},i)=>(0,t.jsx)("h3",{ref:i,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));n.displayName="CardTitle";let o=r.forwardRef(({className:e,...r},i)=>(0,t.jsx)("p",{ref:i,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let l=r.forwardRef(({className:e,...r},i)=>(0,t.jsx)("div",{ref:i,className:(0,a.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent";let d=r.forwardRef(({className:e,...r},i)=>(0,t.jsx)("div",{ref:i,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r}));d.displayName="CardFooter",e.s(["Card",()=>i,"CardContent",()=>l,"CardDescription",()=>o,"CardFooter",()=>d,"CardHeader",()=>s,"CardTitle",()=>n])},19455,91918,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(20783),i=Symbol.for("react.lazy"),s=r[" use ".trim().toString()];function n(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function o(e){var i;let o,l=(i=e,(o=r.forwardRef((e,t)=>{let{children:i,...o}=e;if(n(i)&&"function"==typeof s&&(i=s(i._payload)),r.isValidElement(i)){var l;let e,s,n=(l=i,(s=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(s=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),d=function(e,t){let r={...t};for(let a in t){let i=e[a],s=t[a];/^on[A-Z]/.test(a)?i&&s?r[a]=(...e)=>{let t=s(...e);return i(...e),t}:i&&(r[a]=i):"style"===a?r[a]={...i,...s}:"className"===a&&(r[a]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(o,i.props);return i.type!==r.Fragment&&(d.ref=t?(0,a.composeRefs)(t,n):n),r.cloneElement(i,d)}return r.Children.count(i)>1?r.Children.only(null):null})).displayName=`${i}.SlotClone`,o),d=r.forwardRef((e,a)=>{let{children:i,...o}=e;n(i)&&"function"==typeof s&&(i=s(i._payload));let d=r.Children.toArray(i),u=d.find(c);if(u){let e=u.props.children,i=d.map(t=>t!==u?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(l,{...o,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,t.jsx)(l,{...o,ref:a,children:i})});return d.displayName=`${e}.Slot`,d}var l=o("Slot"),d=Symbol("radix.slottable");function c(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===d}e.s(["Slot",()=>l,"createSlot",()=>o],91918);var u=e.i(25913),p=e.i(75157);let m=(0,u.cva)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=r.forwardRef(({className:e,variant:r,size:a,asChild:i=!1,...s},n)=>(0,t.jsx)(i?l:"button",{className:(0,p.cn)(m({variant:r,size:a,className:e})),ref:n,...s}));f.displayName="Button",e.s(["Button",()=>f],19455)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},29592,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(25913),i=e.i(75157);let s=(0,a.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=r.forwardRef(({className:e,variant:r,...a},n)=>(0,t.jsx)("div",{ref:n,role:"alert",className:(0,i.cn)(s({variant:r}),e),...a}));n.displayName="Alert";let o=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("h5",{ref:a,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...r}));o.displayName="AlertTitle";let l=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...r}));l.displayName="AlertDescription",e.s(["Alert",()=>n,"AlertDescription",()=>l,"AlertTitle",()=>o])},32549,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),i=e.i(57951),s=e.i(16973),n=e.i(31278),o=e.i(86722);function l({children:e,redirectTo:l="/login"}){let{user:d,loading:c,signOut:u}=(0,i.useAuth)(),p=(0,a.useRouter)(),{toast:m}=(0,o.useToast)();return((0,r.useEffect)(()=>{if(!c){if(!d)return void p.push(l);d&&(0,s.getCurrentUser)().then(e=>{e?.user?.estado==="inactivo"&&u().then(()=>{m({title:"Cuenta desactivada",description:"Tu cuenta ha sido desactivada. Contacta al administrador.",variant:"destructive"}),p.push("/login")})}).catch(e=>{e.message.includes("Tu cuenta ha sido desactivada")&&u().then(()=>{m({title:"Cuenta desactivada",description:e.message,variant:"destructive"}),p.push("/login")})})}},[d,c,p,l,u,m]),c||!d)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)(n.Loader2,{className:"h-8 w-8 animate-spin"})}):(0,t.jsx)(t.Fragment,{children:e})}e.s(["default",()=>l])},68553,52571,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>r],68553);let a=(0,t.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["Info",()=>a],52571)},46798,78583,e=>{"use strict";let t;var r=e.i(43476),a=e.i(71645),i=e.i(81140),s=e.i(20783),n=e.i(30030),o=e.i(26330),l=e.i(10772),d=e.i(53660),c=(e.i(74606),e.i(96626));e.i(74080);var u=Symbol("radix.slottable");function p(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}var m=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var i,n;let o,l,d,c=(n=i=`Primitive.${t}`,(o=a.forwardRef((e,t)=>{let{children:r,...i}=e;if(a.isValidElement(r)){var n;let e,o,l=(n=r,(o=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(o=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),d=function(e,t){let r={...t};for(let a in t){let i=e[a],s=t[a];/^on[A-Z]/.test(a)?i&&s?r[a]=(...e)=>{let t=s(...e);return i(...e),t}:i&&(r[a]=i):"style"===a?r[a]={...i,...s}:"className"===a&&(r[a]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props);return r.type!==a.Fragment&&(d.ref=t?(0,s.composeRefs)(t,l):l),a.cloneElement(r,d)}return a.Children.count(r)>1?a.Children.only(null):null})).displayName=`${n}.SlotClone`,l=o,(d=a.forwardRef((e,t)=>{let{children:i,...s}=e,n=a.Children.toArray(i),o=n.find(p);if(o){let e=o.props.children,i=n.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,r.jsx)(l,{...s,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,i):null})}return(0,r.jsx)(l,{...s,ref:t,children:i})})).displayName=`${i}.Slot`,d),u=a.forwardRef((e,a)=>{let{asChild:i,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(i?c:t,{...s,ref:a})});return u.displayName=`Primitive.${t}`,{...e,[t]:u}},{}),f=e.i(69340),x=e.i(59411),[h,g]=(0,n.createContextScope)("Tooltip",[d.createPopperScope]),v=(0,d.createPopperScope)(),y="TooltipProvider",j="tooltip.open",[b,N]=h(y),w=e=>{let{__scopeTooltip:t,delayDuration:i=700,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:o}=e,l=a.useRef(!0),d=a.useRef(!1),c=a.useRef(0);return a.useEffect(()=>{let e=c.current;return()=>window.clearTimeout(e)},[]),(0,r.jsx)(b,{scope:t,isOpenDelayedRef:l,delayDuration:i,onOpen:a.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:a.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,s)},[s]),isPointerInTransitRef:d,onPointerInTransitChange:a.useCallback(e=>{d.current=e},[]),disableHoverableContent:n,children:o})};w.displayName=y;var C="Tooltip",[T,R]=h(C),k=e=>{let{__scopeTooltip:t,children:i,open:s,defaultOpen:n,onOpenChange:o,disableHoverableContent:c,delayDuration:u}=e,p=N(C,e.__scopeTooltip),m=v(t),[x,h]=a.useState(null),g=(0,l.useId)(),y=a.useRef(0),b=c??p.disableHoverableContent,w=u??p.delayDuration,R=a.useRef(!1),[k,E]=(0,f.useControllableState)({prop:s,defaultProp:n??!1,onChange:e=>{e?(p.onOpen(),document.dispatchEvent(new CustomEvent(j))):p.onClose(),o?.(e)},caller:C}),P=a.useMemo(()=>k?R.current?"delayed-open":"instant-open":"closed",[k]),S=a.useCallback(()=>{window.clearTimeout(y.current),y.current=0,R.current=!1,E(!0)},[E]),D=a.useCallback(()=>{window.clearTimeout(y.current),y.current=0,E(!1)},[E]),A=a.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{R.current=!0,E(!0),y.current=0},w)},[w,E]);return a.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),(0,r.jsx)(d.Root,{...m,children:(0,r.jsx)(T,{scope:t,contentId:g,open:k,stateAttribute:P,trigger:x,onTriggerChange:h,onTriggerEnter:a.useCallback(()=>{p.isOpenDelayedRef.current?A():S()},[p.isOpenDelayedRef,A,S]),onTriggerLeave:a.useCallback(()=>{b?D():(window.clearTimeout(y.current),y.current=0)},[D,b]),onOpen:S,onClose:D,disableHoverableContent:b,children:i})})};k.displayName=C;var E="TooltipTrigger",P=a.forwardRef((e,t)=>{let{__scopeTooltip:n,...o}=e,l=R(E,n),c=N(E,n),u=v(n),p=a.useRef(null),f=(0,s.useComposedRefs)(t,p,l.onTriggerChange),x=a.useRef(!1),h=a.useRef(!1),g=a.useCallback(()=>x.current=!1,[]);return a.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),(0,r.jsx)(d.Anchor,{asChild:!0,...u,children:(0,r.jsx)(m.button,{"aria-describedby":l.open?l.contentId:void 0,"data-state":l.stateAttribute,...o,ref:f,onPointerMove:(0,i.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(h.current||c.isPointerInTransitRef.current||(l.onTriggerEnter(),h.current=!0))}),onPointerLeave:(0,i.composeEventHandlers)(e.onPointerLeave,()=>{l.onTriggerLeave(),h.current=!1}),onPointerDown:(0,i.composeEventHandlers)(e.onPointerDown,()=>{l.open&&l.onClose(),x.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:(0,i.composeEventHandlers)(e.onFocus,()=>{x.current||l.onOpen()}),onBlur:(0,i.composeEventHandlers)(e.onBlur,l.onClose),onClick:(0,i.composeEventHandlers)(e.onClick,l.onClose)})})});P.displayName=E;var[S,D]=h("TooltipPortal",{forceMount:void 0}),A="TooltipContent",M=a.forwardRef((e,t)=>{let a=D(A,e.__scopeTooltip),{forceMount:i=a.forceMount,side:s="top",...n}=e,o=R(A,e.__scopeTooltip);return(0,r.jsx)(c.Presence,{present:i||o.open,children:o.disableHoverableContent?(0,r.jsx)(I,{side:s,...n,ref:t}):(0,r.jsx)(O,{side:s,...n,ref:t})})}),O=a.forwardRef((e,t)=>{let i=R(A,e.__scopeTooltip),n=N(A,e.__scopeTooltip),o=a.useRef(null),l=(0,s.useComposedRefs)(t,o),[d,c]=a.useState(null),{trigger:u,onClose:p}=i,m=o.current,{onPointerInTransitChange:f}=n,x=a.useCallback(()=>{c(null),f(!1)},[f]),h=a.useCallback((e,t)=>{let r,a=e.currentTarget,i={x:e.clientX,y:e.clientY},s=function(e,t){let r=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,a,i,s)){case s:return"left";case i:return"right";case r:return"top";case a:return"bottom";default:throw Error("unreachable")}}(i,a.getBoundingClientRect());c(((r=[...function(e,t,r=5){let a=[];switch(t){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return a}(i,s),...function(e){let{top:t,right:r,bottom:a,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:a},{x:i,y:a}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let a=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(a.y-r.y)>=(e.y-r.y)*(a.x-r.x))t.pop();else break}t.push(a)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let a=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(a.y-t.y)>=(e.y-t.y)*(a.x-t.x))r.pop();else break}r.push(a)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),f(!0)},[f]);return a.useEffect(()=>()=>x(),[x]),a.useEffect(()=>{if(u&&m){let e=e=>h(e,m),t=e=>h(e,u);return u.addEventListener("pointerleave",e),m.addEventListener("pointerleave",t),()=>{u.removeEventListener("pointerleave",e),m.removeEventListener("pointerleave",t)}}},[u,m,h,x]),a.useEffect(()=>{if(d){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},a=u?.contains(t)||m?.contains(t),i=!function(e,t){let{x:r,y:a}=e,i=!1;for(let e=0,s=t.length-1;e<t.length;s=e++){let n=t[e],o=t[s],l=n.x,d=n.y,c=o.x,u=o.y;d>a!=u>a&&r<(c-l)*(a-d)/(u-d)+l&&(i=!i)}return i}(r,d);a?x():i&&(x(),p())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[u,m,d,p,x]),(0,r.jsx)(I,{...e,ref:l})}),[B,_]=h(C,{isInside:!1}),F=((t=({children:e})=>(0,r.jsx)(r.Fragment,{children:e})).displayName="TooltipContent.Slottable",t.__radixId=u,t),I=a.forwardRef((e,t)=>{let{__scopeTooltip:i,children:s,"aria-label":n,onEscapeKeyDown:l,onPointerDownOutside:c,...u}=e,p=R(A,i),m=v(i),{onClose:f}=p;return a.useEffect(()=>(document.addEventListener(j,f),()=>document.removeEventListener(j,f)),[f]),a.useEffect(()=>{if(p.trigger){let e=e=>{let t=e.target;t?.contains(p.trigger)&&f()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[p.trigger,f]),(0,r.jsx)(o.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:f,children:(0,r.jsxs)(d.Content,{"data-state":p.stateAttribute,...m,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,r.jsx)(F,{children:s}),(0,r.jsx)(B,{scope:i,isInside:!0,children:(0,r.jsx)(x.Root,{id:p.contentId,role:"tooltip",children:n||s})})]})})});M.displayName=A;var L="TooltipArrow";a.forwardRef((e,t)=>{let{__scopeTooltip:a,...i}=e,s=v(a);return _(L,a).isInside?null:(0,r.jsx)(d.Arrow,{...s,...i,ref:t})}).displayName=L;var z=e.i(75157);let H=a.forwardRef(({className:e,sideOffset:t=4,...a},i)=>(0,r.jsx)(M,{ref:i,sideOffset:t,className:(0,z.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));H.displayName=M.displayName,e.s(["Tooltip",()=>k,"TooltipContent",()=>H,"TooltipProvider",()=>w,"TooltipTrigger",()=>P],46798);let V=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>V],78583)},23649,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),i=e.i(57951),s=e.i(16973),n=e.i(15288),o=e.i(19455),l=e.i(75157);let d=r.forwardRef(({className:e,type:r,...a},i)=>(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...a}));d.displayName="Input";var c=e.i(48425),u=r.forwardRef((e,r)=>(0,t.jsx)(c.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));u.displayName="Label";let p=(0,e.i(25913).cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(u,{ref:a,className:(0,l.cn)(p(),e),...r}));m.displayName=u.displayName;let f=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));f.displayName="Textarea";var x=e.i(67489),h=e.i(29592),g=e.i(87486),v=e.i(99375),y=e.i(26999),j=e.i(37727);let b=y.Root;y.Trigger;let N=y.Portal;y.Close;let w=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(y.Overlay,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r}));w.displayName=y.Overlay.displayName;let C=r.forwardRef(({className:e,children:r,...a},i)=>(0,t.jsxs)(N,{children:[(0,t.jsx)(w,{}),(0,t.jsxs)(y.Content,{ref:i,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",e),...a,children:[r,(0,t.jsxs)(y.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(j.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));C.displayName=y.Content.displayName;let T=({className:e,...r})=>(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...r});T.displayName="DialogHeader";let R=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(y.Title,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...r}));R.displayName=y.Title.displayName;let k=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(y.Description,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...r}));k.displayName=y.Description.displayName;var E=e.i(46798),P=e.i(75254);let S=(0,P.default)("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),D=(0,P.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var A=e.i(68553),M=e.i(31278);let O=(0,P.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var B=e.i(95468),_=e.i(52571),F=e.i(78583),I=e.i(42252),L=e.i(32549);function z(){let{appUser:e,loading:l}=(0,i.useAuth)(),c=(0,a.useRouter)(),[u,p]=(0,r.useState)([]),[y,N]=(0,r.useState)([]),[w,P]=(0,r.useState)(""),[z,H]=(0,r.useState)(""),[V,$]=(0,r.useState)("otro"),[W,q]=(0,r.useState)(!0),[U,G]=(0,r.useState)(!1),[X,J]=(0,r.useState)(""),[K,Y]=(0,r.useState)(!1),[Z,Q]=(0,r.useState)(!1),ee=(0,r.useRef)(null);(0,r.useEffect)(()=>{l||!e||e.crear_carpeta||c.push("/dashboard")},[e,l,c]),(0,r.useEffect)(()=>{if(Z)navigator.mediaDevices.getUserMedia({video:!0}).then(e=>{let t=document.getElementById("video");t&&(t.srcObject=e)}).catch(e=>{console.error("Error accediendo a la cÃ¡mara:",e),J("No se pudo acceder a la cÃ¡mara"),Q(!1)});else{let e=document.getElementById("video");e&&e.srcObject&&e.srcObject.getTracks().forEach(e=>e.stop())}},[Z]);let et=async e=>{if(e.preventDefault(),0===u.length||!w||!z)return void J("Por favor completa todos los campos y sube al menos un archivo.");G(!0),J(""),Y(!1);try{let e=new FormData;u.forEach(t=>{e.append("foto",t)}),e.append("monto",w),e.append("descripcion",z),e.append("tipo",V),e.append("createTxt",W?"1":"0"),await (0,s.uploadViatico)(e),Y(!0),setTimeout(()=>{c.push("/mis-viaticos")},2e3)}catch(e){J(e.message||"Error al subir el viÃ¡tico")}finally{G(!1)}};return l||!e?(0,t.jsx)(L.default,{children:(0,t.jsx)(I.default,{children:(0,t.jsx)("div",{className:"max-w-5xl mx-auto space-y-6",children:(0,t.jsx)(n.Card,{children:(0,t.jsx)(n.CardContent,{className:"p-20",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-center space-y-4",children:[(0,t.jsx)(M.Loader2,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Cargando..."})]})})})})})}):e.crear_carpeta?(0,t.jsx)(L.default,{children:(0,t.jsx)(I.default,{children:(0,t.jsx)(E.TooltipProvider,{children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Nuevo ViÃ¡tico"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Registra un nuevo comprobante con su foto o PDF"})]}),(0,t.jsx)("form",{onSubmit:et,className:"space-y-6",children:(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"InformaciÃ³n del Comprobante"}),(0,t.jsx)(n.CardDescription,{children:"Sube tus comprobantes y completa los datos"})]}),(0,t.jsxs)(n.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(m,{children:"Comprobantes"}),(0,t.jsxs)(E.Tooltip,{children:[(0,t.jsx)(E.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)(g.Badge,{variant:"outline",className:"text-xs",children:[(0,t.jsx)(_.Info,{className:"h-3 w-3 mr-1"}),"Formatos: JPG, PNG, WEBP, PDF"]})}),(0,t.jsx)(E.TooltipContent,{children:(0,t.jsx)("p",{children:"El tamaÃ±o mÃ¡ximo es de 10MB por archivo"})})]})]}),(0,t.jsx)("input",{ref:ee,type:"file",accept:"image/*,application/pdf",onChange:e=>{let t=e.target.files;if(!t)return;let r=Array.from(t),a=[...u],i=[...y];for(let e of r){if(e.size>0xa00000){J(`El archivo ${e.name} es demasiado grande. M\xe1ximo 10MB.`);continue}a.push(e);let t="application/pdf"===e.type,r=new FileReader;r.onload=r=>{i.push({url:r.target?.result,isPdf:t,name:e.name}),N([...i])},r.readAsDataURL(e)}p(a),J(""),ee.current&&(ee.current.value="")},className:"hidden",multiple:!0}),y.length>0?(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[y.map((e,r)=>(0,t.jsxs)("div",{className:"relative group w-full",children:[(0,t.jsx)("div",{className:"rounded-lg border overflow-hidden aspect-square flex items-center justify-center bg-muted",children:e.isPdf?(0,t.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center text-center",children:[(0,t.jsx)(F.FileText,{className:"w-10 h-10 text-primary"}),(0,t.jsx)("p",{className:"mt-2 text-xs font-medium break-all max-w-xs",children:e.name}),(0,t.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"mt-2",children:(0,t.jsx)(o.Button,{variant:"outline",size:"sm",children:"Ver"})})]}):(0,t.jsx)("img",{src:e.url,alt:`Vista previa ${r+1}`,className:"w-full h-full object-cover"})}),(0,t.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsxs)(E.Tooltip,{children:[(0,t.jsx)(E.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(o.Button,{type:"button",variant:"destructive",size:"icon",onClick:()=>{p(u.filter((e,t)=>t!==r)),N(y.filter((e,t)=>t!==r))},children:(0,t.jsx)(j.X,{className:"h-4 w-4"})})}),(0,t.jsx)(E.TooltipContent,{children:(0,t.jsx)("p",{children:"Eliminar archivo"})})]})})]},r)),(0,t.jsxs)("div",{className:"border-2 border-dashed rounded-lg flex flex-col items-center justify-center text-center cursor-pointer hover:bg-muted/50 transition-colors aspect-square",onClick:()=>ee.current?.click(),children:[(0,t.jsx)(D,{className:"w-8 h-8 text-primary"}),(0,t.jsx)("p",{className:"mt-2 text-sm font-semibold",children:"AÃ±adir mÃ¡s"})]})]}):(0,t.jsxs)("div",{className:"border-2 border-dashed rounded-lg flex flex-col items-center justify-center p-20 text-center cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>ee.current?.click(),children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 rounded-lg bg-primary/10 flex items-center justify-center mb-4",children:(0,t.jsx)(D,{className:"w-8 h-8 text-primary"})}),(0,t.jsx)("p",{className:"mt-4 font-semibold",children:"Seleccionar Archivos"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"o arrastra y suelta aquÃ­"}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-2 flex-wrap",children:[(0,t.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:"JPG"}),(0,t.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:"PNG"}),(0,t.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:"WEBP"}),(0,t.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:"PDF"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-4",children:"MÃ¡ximo 10MB por archivo"})]}),(0,t.jsxs)(o.Button,{type:"button",variant:"outline",className:"w-full",onClick:()=>{Q(!0)},children:[(0,t.jsx)(A.Camera,{className:"h-4 w-4 mr-2"}),"Tomar y AÃ±adir Foto"]})]}),(0,t.jsxs)("div",{className:"space-y-6 pt-6 border-t",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m,{htmlFor:"monto",children:"Monto (S/)"}),(0,t.jsx)(d,{id:"monto",type:"number",step:"0.01",min:"0",value:w,onChange:e=>P(e.target.value),required:!0,placeholder:"0.00"})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m,{htmlFor:"descripcion",children:"DescripciÃ³n"}),(0,t.jsx)(f,{id:"descripcion",value:z,onChange:e=>H(e.target.value),required:!0,placeholder:"Ej: Almuerzo con cliente, taxi al aeropuerto, etc.",rows:4})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 items-end",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m,{htmlFor:"tipo",children:"Tipo de Gasto"}),(0,t.jsxs)(x.Select,{value:V,onValueChange:$,children:[(0,t.jsx)(x.SelectTrigger,{id:"tipo",children:(0,t.jsx)(x.SelectValue,{placeholder:"Selecciona un tipo"})}),(0,t.jsxs)(x.SelectContent,{children:[(0,t.jsx)(x.SelectItem,{value:"desayuno",children:"ðŸŒ… Desayuno"}),(0,t.jsx)(x.SelectItem,{value:"almuerzo",children:"ðŸ½ï¸ Almuerzo"}),(0,t.jsx)(x.SelectItem,{value:"cena",children:"ðŸŒ™ Cena"}),(0,t.jsx)(x.SelectItem,{value:"otro",children:"ðŸ“ Otro"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(v.Switch,{id:"createTxt",checked:W,onCheckedChange:q}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(m,{htmlFor:"createTxt",className:"text-sm cursor-pointer",children:"Crear .txt en OneDrive"}),(0,t.jsxs)(E.Tooltip,{children:[(0,t.jsx)(E.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("span",{className:"text-xs text-muted-foreground cursor-help",children:"Â¿QuÃ© es esto?"})}),(0,t.jsx)(E.TooltipContent,{children:(0,t.jsx)("p",{children:"Crea un archivo de texto adicional con la informaciÃ³n del viÃ¡tico en OneDrive"})})]})]})]})]})]}),X&&(0,t.jsxs)(h.Alert,{variant:"destructive",children:[(0,t.jsx)(O,{className:"h-4 w-4"}),(0,t.jsx)(h.AlertTitle,{children:"Error"}),(0,t.jsx)(h.AlertDescription,{children:X})]}),K&&(0,t.jsxs)(h.Alert,{children:[(0,t.jsx)(B.CheckCircle2,{className:"h-4 w-4"}),(0,t.jsx)(h.AlertTitle,{children:"Ã‰xito"}),(0,t.jsx)(h.AlertDescription,{children:"ViÃ¡tico registrado correctamente. Redirigiendo..."})]})]}),(0,t.jsx)(n.CardFooter,{className:"flex justify-end",children:(0,t.jsx)(o.Button,{type:"submit",size:"lg",disabled:U,className:"min-w-[200px]",children:U?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S,{className:"mr-2 h-4 w-4"}),"Registrar ViÃ¡tico"]})})})]})}),(0,t.jsx)(b,{open:Z,onOpenChange:Q,children:(0,t.jsxs)(C,{className:"max-w-4xl",children:[(0,t.jsxs)(T,{children:[(0,t.jsx)(R,{children:"Tomar Foto"}),(0,t.jsx)(k,{children:"Captura una foto de tu comprobante usando la cÃ¡mara"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("video",{id:"video",autoPlay:!0,className:"w-full rounded-lg",style:{display:"block"}}),(0,t.jsx)("canvas",{id:"canvas",style:{display:"none"}}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>Q(!1),children:"Cancelar"}),(0,t.jsxs)(o.Button,{onClick:()=>{let e=document.getElementById("video"),t=document.getElementById("canvas");if(!e||!t)return;let r=t.getContext("2d");r&&(t.width=e.videoWidth,t.height=e.videoHeight,r.drawImage(e,0,0),t.toBlob(e=>{if(e){let t=new File([e],`foto-${Date.now()}.jpg`,{type:"image/jpeg"});p([...u,t]),N([...y,{url:URL.createObjectURL(e),isPdf:!1,name:t.name}]),Q(!1)}},"image/jpeg",.8))},children:[(0,t.jsx)(A.Camera,{className:"h-4 w-4 mr-2"}),"Capturar Foto"]})]})]})]})})]})})})}):(0,t.jsx)(L.default,{children:(0,t.jsx)(I.default,{children:(0,t.jsx)("div",{className:"max-w-5xl mx-auto space-y-6",children:(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Acceso Restringido"}),(0,t.jsx)(n.CardDescription,{children:"No tienes permiso para acceder a esta pÃ¡gina"})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)(h.Alert,{variant:"destructive",children:[(0,t.jsx)(O,{className:"h-4 w-4"}),(0,t.jsx)(h.AlertTitle,{children:"Sin Permiso"}),(0,t.jsxs)(h.AlertDescription,{children:["Tu carpeta de OneDrive no estÃ¡ habilitada. No puedes subir viÃ¡ticos en este momento. Por favor, contacta al administrador para habilitar tu cuenta.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"SerÃ¡s redirigido al dashboard..."]})]})})]})})})})}e.s(["default",()=>z],23649)}]);