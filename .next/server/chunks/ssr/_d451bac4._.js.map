{"version":3,"sources":["../../../../src/contexts/AuthContext.tsx","../../../../src/config/firebase.ts","../../../../node_modules/firebase/app/index.ts","../../../../src/lib/use-toast.ts","../../../../src/services/api.ts"],"sourcesContent":["'use client'\r\n\r\nimport { createContext, useContext, useState, useEffect } from 'react'\r\nimport {\r\n  signInWithEmailAndPassword,\r\n  createUserWithEmailAndPassword,\r\n  signOut as firebaseSignOut,\r\n  onAuthStateChanged,\r\n  OAuthProvider,\r\n  signInWithPopup,\r\n  getRedirectResult,\r\n  setPersistence,\r\n  browserLocalPersistence,\r\n  User,\r\n} from 'firebase/auth'\r\nimport { auth, initializeFirebase } from '../config/firebase'\r\nimport { createUserFolder, getMyUser } from '../services/api'\r\n\r\ninterface AppUser {\r\n  uid: string\r\n  email: string | null\r\n  displayName: string | null\r\n  role: string\r\n  estado: string\r\n  crear_carpeta: boolean\r\n  last_closed_date?: string\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  appUser: AppUser | null\r\n  signIn: (email: string, password: string) => Promise<{ success: boolean; user?: User; error?: string }>\r\n  signUp: (email: string, password: string) => Promise<{ success: boolean; user?: User; error?: string }>\r\n  signInWithMicrosoft: () => Promise<{ success: boolean; user?: User; error?: string }>\r\n  signOut: () => Promise<{ success: boolean; error?: string }>\r\n  loading: boolean\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>({\r\n  user: null,\r\n  appUser: null,\r\n  signIn: async () => ({ success: false }),\r\n  signUp: async () => ({ success: false }),\r\n  signInWithMicrosoft: async () => ({ success: false }),\r\n  signOut: async () => ({ success: false }),\r\n  loading: true,\r\n})\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext)\r\n}\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [appUser, setAppUser] = useState<AppUser | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    let unsub = () => { }\r\n\r\n    const setupAuth = async () => {\r\n      // Asegurar que Firebase est√© inicializado\r\n      await initializeFirebase()\r\n\r\n      // Re-importar auth para obtener la instancia actualizada\r\n      const { auth: currentAuth } = await import('../config/firebase')\r\n\r\n      if (!currentAuth) {\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      try {\r\n        // Usar browserLocalPersistence para que la sesi√≥n persista incluso despu√©s de cerrar el navegador\r\n        await setPersistence(currentAuth, browserLocalPersistence)\r\n      } catch (e) {\r\n        console.warn('No se pudo establecer persistencia local:', (e as Error).message || e)\r\n      }\r\n\r\n      // Verificar si hay un resultado de redirect pendiente\r\n      try {\r\n        const redirectResult = await getRedirectResult(currentAuth)\r\n        if (redirectResult) {\r\n          const { getAdditionalUserInfo } = await import('firebase/auth')\r\n          const isNewUser = getAdditionalUserInfo(redirectResult)?.isNewUser\r\n          if (isNewUser) {\r\n            // Usuario es nuevo, registrarlo en la base de datos\r\n            try {\r\n              const { createUserFolder } = await import('@/services/api')\r\n              await createUserFolder()\r\n            } catch (e) {\r\n              console.warn('No se pudo crear la carpeta para el nuevo usuario:', (e as Error).message || e)\r\n            }\r\n          }\r\n        }\r\n      } catch (e) {\r\n        // Ignorar errores de redirect\r\n      }\r\n\r\n      unsub = onAuthStateChanged(currentAuth, async (user) => {\r\n        setUser(user)\r\n        // No bloquear la UI mientras se obtienen los datos del usuario\r\n        // Establecer loading a false inmediatamente para que la app pueda renderizar\r\n        if (user) {\r\n          // Fetch en segundo plano\r\n          user.getIdToken().then(token => {\r\n            document.cookie = `firebase-token=${token}; path=/; max-age=604800; SameSite=Lax; Secure`\r\n            return getMyUser()\r\n          }).then(myUser => {\r\n            if (myUser) {\r\n              setAppUser(myUser)\r\n            }\r\n          }).catch(e => {\r\n            console.warn('Error fetching user data:', e)\r\n            setAppUser(null)\r\n          })\r\n\r\n          // Setup token refresh interval\r\n          setInterval(async () => {\r\n            try {\r\n              const currentUser = currentAuth.currentUser\r\n              if (currentUser) {\r\n                const newToken = await currentUser.getIdToken(true)\r\n                document.cookie = `firebase-token=${newToken}; path=/; max-age=604800; SameSite=Lax; Secure`\r\n              }\r\n            } catch (e) {\r\n              console.warn('Error renovando token:', (e as Error).message || e)\r\n            }\r\n          }, 3600000)\r\n        } else {\r\n          document.cookie = 'firebase-token=; path=/; max-age=0'\r\n          setAppUser(null)\r\n        }\r\n        setLoading(false)\r\n      })\r\n    }\r\n\r\n    setupAuth()\r\n\r\n    return () => {\r\n      try { unsub() } catch (e) { }\r\n    }\r\n  }, [])\r\n\r\n  async function signIn(email: string, password: string) {\r\n    await initializeFirebase()\r\n    const { auth: currentAuth } = await import('../config/firebase')\r\n    if (!currentAuth) {\r\n      return { success: false, error: 'Firebase Auth no est√° disponible' }\r\n    }\r\n    try {\r\n      const userCredential = await signInWithEmailAndPassword(currentAuth, email, password)\r\n      return { success: true, user: userCredential.user }\r\n    } catch (error) {\r\n      return { success: false, error: (error as Error).message }\r\n    }\r\n  }\r\n\r\n  async function signInWithMicrosoft() {\r\n    await initializeFirebase()\r\n    const { auth: currentAuth } = await import('../config/firebase')\r\n    if (!currentAuth) {\r\n      return { success: false, error: 'Firebase Auth no est√° disponible. Verifica las variables de entorno.' }\r\n    }\r\n    try {\r\n      const provider = new OAuthProvider('microsoft.com')\r\n      // Solo pedir permisos b√°sicos de autenticaci√≥n - NO pedir acceso a OneDrive\r\n      // El acceso a OneDrive se maneja en el worker con su propio token\r\n      provider.addScope('openid')\r\n      provider.addScope('profile')\r\n      provider.addScope('email')\r\n      provider.addScope('offline_access')\r\n      // ELIMINAR: provider.addScope('Files.ReadWrite.All') - Esto requiere consentimiento del admin\r\n\r\n      // Usar signInWithPopup (funciona correctamente, los warnings de COOP no afectan funcionalidad)\r\n      const result = await signInWithPopup(currentAuth, provider)\r\n\r\n      const { getAdditionalUserInfo } = await import('firebase/auth')\r\n      const isNewUser = getAdditionalUserInfo(result)?.isNewUser\r\n      if (isNewUser) {\r\n        try {\r\n          const { createUserFolder } = await import('@/services/api')\r\n          await createUserFolder()\r\n        } catch (e) {\r\n          console.warn('No se pudo crear la carpeta para el nuevo usuario:', (e as Error).message || e)\r\n        }\r\n      }\r\n\r\n      return { success: true, user: result.user }\r\n    } catch (error: any) {\r\n      if (error.code === 'auth/popup-closed-by-user') {\r\n        console.log('Usuario cerr√≥ el popup de autenticaci√≥n')\r\n        return { success: false, error: 'Inicio de sesi√≥n cancelado por el usuario' }\r\n      }\r\n      console.error('Error en signInWithMicrosoft:', error)\r\n      return { success: false, error: error.message || 'Error al iniciar sesi√≥n con Microsoft' }\r\n    }\r\n  }\r\n\r\n  async function signUp(email: string, password: string) {\r\n    await initializeFirebase()\r\n    const { auth: currentAuth } = await import('../config/firebase')\r\n    if (!currentAuth) {\r\n      return { success: false, error: 'Firebase Auth no est√° disponible' }\r\n    }\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(currentAuth, email, password)\r\n      try {\r\n        await createUserFolder()\r\n      } catch (e) {\r\n        console.warn('No se pudo crear la carpeta en OneDrive al registrar usuario:', (e as Error).message || e)\r\n      }\r\n      return { success: true, user: userCredential.user }\r\n    } catch (error) {\r\n      return { success: false, error: (error as Error).message }\r\n    }\r\n  }\r\n\r\n  async function signOut() {\r\n    await initializeFirebase()\r\n    const { auth: currentAuth } = await import('../config/firebase')\r\n    if (!currentAuth) {\r\n      return { success: false, error: 'Firebase Auth no est√° disponible' }\r\n    }\r\n    try {\r\n      await firebaseSignOut(currentAuth)\r\n      // Eliminar cookie al cerrar sesi√≥n\r\n      document.cookie = 'firebase-token=; path=/; max-age=0'\r\n      return { success: true }\r\n    } catch (error) {\r\n      return { success: false, error: (error as Error).message }\r\n    }\r\n  }\r\n\r\n  const value = {\r\n    user,\r\n    appUser,\r\n    signIn,\r\n    signUp,\r\n    signInWithMicrosoft,\r\n    signOut,\r\n    loading\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n","// src/config/firebase.ts\r\nimport { initializeApp, getApps, FirebaseApp } from 'firebase/app'\r\nimport { getAuth, Auth } from 'firebase/auth'\r\n\r\nlet app: FirebaseApp | null = null\r\nlet auth: Auth | null = null\r\n\r\n/* ======================================================\r\n   FUNCI√ìN 1 ‚Äî OBTENER CONFIGURACI√ìN DE FIREBASE\r\n   ====================================================== */\r\nasync function getFirebaseConfig() {\r\n  // üöÄ RETORNAR SIEMPRE VALORES HARDCODED\r\n  // Esto elimina la dependencia de /api/config y de process.env\r\n  // para evitar problemas de espacios en blanco en Vercel.\r\n  return {\r\n    firebase: {\r\n      apiKey: 'AIzaSyDl0BvJnN3m2AVSZpCr6Dqbt3mIMa7ZITM',\r\n      authDomain: 'viaticos-d5652.firebaseapp.com',\r\n      projectId: 'viaticos-d5652',\r\n    },\r\n    apiUrl: 'https://viaticos.davidzapata-dz051099.workers.dev',\r\n  }\r\n}\r\n\r\n/* ======================================================\r\n   FUNCI√ìN 2 ‚Äî INICIALIZAR FIREBASE\r\n   ====================================================== */\r\nexport async function initializeFirebase() {\r\n  if (typeof window === 'undefined') return null\r\n  if (app && auth) return { app, auth }\r\n\r\n  try {\r\n    const { firebase: firebaseConfig } = await getFirebaseConfig()\r\n\r\n    if (!firebaseConfig.apiKey) {\r\n      console.warn(\r\n        '‚ö† Firebase no est√° configurado.'\r\n      )\r\n      return null\r\n    }\r\n\r\n    if (getApps().length === 0) {\r\n      app = initializeApp(firebaseConfig)\r\n    } else {\r\n      app = getApps()[0]\r\n    }\r\n\r\n    auth = getAuth(app)\r\n    return { app, auth }\r\n  } catch (error) {\r\n    console.error('üî• Error inicializando Firebase:', error)\r\n  }\r\n}\r\n\r\nexport { auth }\r\nexport default app","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerVersion } from '@firebase/app';\nimport { name, version } from '../package.json';\n\nregisterVersion(name, version, 'app');\nexport * from '@firebase/app';\n","// Inspired by react-hot-toast library.\nimport * as React from \"react\"\n\nimport type { ToastActionElement, ToastProps } from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_VALUE\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast(props: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","import { auth, initializeFirebase } from '../config/firebase'\r\nimport { toast } from '@/lib/use-toast'\r\n\r\n// API URL constante para producci√≥n\r\nconst API_URL = 'https://viaticos.davidzapata-dz051099.workers.dev'\r\n\r\nasync function getAuthToken() {\r\n  if (typeof window === 'undefined') {\r\n    throw new Error('getAuthToken solo puede ser llamado en el cliente')\r\n  }\r\n\r\n  await initializeFirebase()\r\n  const { auth: currentAuth } = await import('../config/firebase')\r\n\r\n  if (!currentAuth) {\r\n    throw new Error('Firebase Auth no est√° disponible. Verifica las variables de entorno NEXT_PUBLIC_FIREBASE_API_KEY, FIREBASE_AUTH_DOMAIN y FIREBASE_PROJECT_ID')\r\n  }\r\n  const user = currentAuth.currentUser\r\n  if (!user) {\r\n    throw new Error('Usuario no autenticado')\r\n  }\r\n  const token = await user.getIdToken()\r\n  return token\r\n}\r\n\r\nasync function apiRequest(endpoint: string, options: RequestInit = {}) {\r\n  try {\r\n    const token = await getAuthToken()\r\n\r\n    const response = await fetch(`${API_URL}${endpoint}`, {\r\n      ...options,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`,\r\n        ...options.headers,\r\n      },\r\n    })\r\n\r\n    // Leer la respuesta primero\r\n    const data = await response.json()\r\n\r\n    // Si la respuesta no es OK, verificar si tiene success: true (puede ser lista vac√≠a)\r\n    if (!response.ok) {\r\n      // Si tiene success: true, retornarla (puede tener lista vac√≠a por error de BD)\r\n      if (data.success === true) {\r\n        return data\r\n      }\r\n\r\n      // Mejorar mensajes de error\r\n      if (response.status === 401) {\r\n        if (typeof window !== 'undefined') {\r\n          window.location.href = '/login'\r\n        }\r\n        throw new Error('Sesi√≥n expirada. Por favor, inicia sesi√≥n nuevamente.')\r\n      }\r\n\r\n      throw new Error(data.message || data.error || 'Error en la solicitud')\r\n    }\r\n\r\n    if (data.success === false && data.error) {\r\n      throw new Error(data.error || data.message || 'Error en la solicitud')\r\n    }\r\n\r\n    const method = options.method?.toUpperCase()\r\n    if (method === 'POST' || method === 'PUT' || method === 'DELETE') {\r\n      toast({\r\n        title: \"√âxito\",\r\n        description: \"Datos actualizados correctamente.\",\r\n        variant: \"success\",\r\n      })\r\n    }\r\n\r\n    return data\r\n  } catch (error) {\r\n    // Si el error es de autenticaci√≥n, propagarlo con mensaje claro y redirigir\r\n    if (error instanceof Error && (error.message.includes('Usuario no autenticado') || error.message.includes('Sesi√≥n expirada'))) {\r\n      if (typeof window !== 'undefined') {\r\n        window.location.href = '/login'\r\n      }\r\n      throw new Error('Sesi√≥n expirada. Por favor, inicia sesi√≥n nuevamente.')\r\n    }\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function uploadViatico(viaticoData: FormData) {\r\n  const token = await getAuthToken()\r\n\r\n  const response = await fetch(`${API_URL}/api/viaticos`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Authorization': `Bearer ${token}`,\r\n    },\r\n    body: viaticoData,\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ message: 'Error al subir vi√°tico' }))\r\n    throw new Error(error.message || 'Error al subir vi√°tico')\r\n  }\r\n\r\n  toast({\r\n    title: \"√âxito\",\r\n    description: \"Vi√°tico subido correctamente.\",\r\n    variant: \"success\",\r\n  })\r\n\r\n  return response.json()\r\n}\r\n\r\nexport async function getTodaySummary() {\r\n  return apiRequest('/api/viaticos/today-summary', { method: 'GET' })\r\n}\r\n\r\nexport async function getMisViaticos() {\r\n  return apiRequest('/api/viaticos/mis-viaticos')\r\n}\r\n\r\nexport async function getAllViaticos() {\r\n  return apiRequest('/api/viaticos/all')\r\n}\r\n\r\nexport async function getViaticosByUser(userId: string) {\r\n  return apiRequest(`/api/viaticos/user/${userId}`)\r\n}\r\n\r\nexport async function getViaticosByDate(fecha: string) {\r\n  return apiRequest(`/api/viaticos/fecha/${fecha}`)\r\n}\r\n\r\nexport async function createUserFolder() {\r\n  return apiRequest('/api/users', { method: 'POST', body: JSON.stringify({}) })\r\n}\r\n\r\nexport async function getCurrentUser() {\r\n  return apiRequest('/api/users/me', { method: 'GET' })\r\n}\r\n\r\nexport async function getMyUser() {\r\n  try {\r\n    const data = await apiRequest('/api/users/me', { method: 'GET' })\r\n    if (data.success && data.user) {\r\n      return data.user\r\n    }\r\n    return null\r\n  } catch (error) {\r\n    console.error(\"Error fetching my user:\", error)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function getAllUsers() {\r\n  return apiRequest('/api/users', { method: 'GET' })\r\n}\r\n\r\nexport async function setUserRole(uid: string, role: string) {\r\n  return apiRequest(`/api/users/${uid}/role`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify({ role }),\r\n  })\r\n}\r\n\r\nexport async function getOneDriveStructure() {\r\n  return apiRequest('/api/onedrive/structure', { method: 'GET' })\r\n}\r\n\r\nexport async function verifyOneDriveStructure() {\r\n  return apiRequest('/api/onedrive/verify-structure', { method: 'GET' })\r\n}\r\n\r\nexport async function ensureOneDriveFolders() {\r\n  return apiRequest('/api/onedrive/ensure', { method: 'POST' })\r\n}\r\n\r\nexport async function ensureOneDriveFolderForUser(uid: string) {\r\n  const token = await getAuthToken()\r\n  const response = await fetch(`${API_URL}/api/onedrive/ensure-user/${uid}`, {\r\n    method: 'POST',\r\n    headers: { 'Authorization': `Bearer ${token}` },\r\n  })\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ message: 'Error asegurando carpeta' }))\r\n    throw new Error(error.message || 'Error asegurando carpeta')\r\n  }\r\n  toast({\r\n    title: \"√âxito\",\r\n    description: \"Carpeta de usuario asegurada correctamente.\",\r\n    variant: \"success\",\r\n  })\r\n  return response.json()\r\n}\r\n\r\nexport async function ensureMyOneDriveFolder() {\r\n  const token = await getAuthToken()\r\n  const response = await fetch(`${API_URL}/api/onedrive/ensure-me`, {\r\n    method: 'POST',\r\n    headers: { 'Authorization': `Bearer ${token}` },\r\n  })\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ message: 'Error asegurando carpeta' }))\r\n    throw new Error(error.message || 'Error asegurando carpeta')\r\n  }\r\n  toast({\r\n    title: \"√âxito\",\r\n    description: \"Tu carpeta de OneDrive ha sido asegurada.\",\r\n    variant: \"success\",\r\n  })\r\n  return response.json()\r\n}\r\n\r\nexport async function ejecutarMigracion() {\r\n  const token = await getAuthToken()\r\n  const response = await fetch(`${API_URL}/api/migrate`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Authorization': `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ message: 'Error ejecutando migraci√≥n' }))\r\n    throw new Error(error.message || 'Error ejecutando migraci√≥n')\r\n  }\r\n\r\n  toast({\r\n    title: \"√âxito\",\r\n    description: \"Migraci√≥n ejecutada correctamente.\",\r\n    variant: \"success\",\r\n  })\r\n\r\n  return response.json()\r\n}\r\n\r\nexport async function cleanupAnonymousUsers() {\r\n  const token = await getAuthToken()\r\n  const response = await fetch(`${API_URL}/api/cleanup/anonymous`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Authorization': `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ message: 'Error ejecutando limpieza' }))\r\n    throw new Error(error.message || 'Error ejecutando limpieza')\r\n  }\r\n\r\n  toast({\r\n    title: \"√âxito\",\r\n    description: \"Limpieza de usuarios an√≥nimos ejecutada correctamente.\",\r\n    variant: \"success\",\r\n  })\r\n\r\n  return response.json()\r\n}\r\n\r\nexport async function setUserStatus(uid: string, estado: 'activo' | 'inactivo') {\r\n  return apiRequest(`/api/users/${uid}/status`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify({ estado }),\r\n  })\r\n}\r\n\r\nexport async function setUserCreateFolder(uid: string, crearCarpeta: boolean) {\r\n  return apiRequest(`/api/users/${uid}/create-folder`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify({ crear_carpeta: crearCarpeta }),\r\n  })\r\n}\r\n\r\nexport async function closeDay(date: string) {\r\n  return apiRequest('/api/users/close-day', {\r\n    method: 'POST',\r\n    body: JSON.stringify({ date }),\r\n  })\r\n}\r\n\r\nexport async function deleteUser(uid: string) {\r\n  const token = await getAuthToken()\r\n  const response = await fetch(`${API_URL}/api/users/${uid}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      'Authorization': `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ message: 'Error eliminando usuario' }))\r\n    throw new Error(error.message || 'Error eliminando usuario')\r\n  }\r\n\r\n  toast({\r\n    title: \"√âxito\",\r\n    description: \"Usuario eliminado correctamente.\",\r\n    variant: \"success\",\r\n  })\r\n\r\n  return response.json()\r\n}\r\n\r\nexport async function deleteViatico(id: string) {\r\n  const token = await getAuthToken()\r\n  const response = await fetch(`${API_URL}/api/viaticos/${id}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      'Authorization': `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({ message: 'Error eliminando vi√°tico' }))\r\n    throw new Error(error.message || 'Error eliminando vi√°tico')\r\n  }\r\n\r\n  toast({\r\n    title: \"√âxito\",\r\n    description: \"Vi√°tico eliminado correctamente.\",\r\n    variant: \"success\",\r\n  })\r\n\r\n  return response.json()\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[2]}